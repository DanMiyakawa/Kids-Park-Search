<div class='container'><br>
  <h2 class="text-center"><strong>〜検索結果一覧〜</strong></h2>
    <div class="row">
    <%= search_form_for @q, url: search_admin_parks_path, class: "mt-3 mx-auto" do |f| %>
      <%= f.collection_select :address_cont, JpPrefecture::Prefecture.all, :name, :name, { prompt: '都道府県を選択' } %> ×
        <%= f.search_field :name_or_address_cont, placeholder: "住所またはキーワードを入力", size: "50×5" %> ×
        <%= f.collection_select :genre_id_eq, Genre.all, :id, :name, { prompt: 'ジャンルを検索' } %>
        <%= f.submit '検索' %>
      <% end %>
    </div>
    <div class="row mx-auto">
      <% @results.each_with_index do |park,i| %>
        <%= link_to admin_park_path(park.id),'data-turbolinks': false, class: "col-sm-12 col-md-6 col-lg-4 col-xl-3 text-center text-dark text-nowrap mt-5" do %>
          <div id="map<%= i %>" date-lat="<%= park.latitude %>" date-lng="<%= park.longitude %>" style='border-top-left-radius: 10%; border-top-right-radius: 10%; width: 250px; height: 250px; display: block; margin: auto;'></div>

          <script>
            function initMap(){
              <% @results.each_with_index do |park,i| %>
                //Idの数だけマップを出力
              var latlng = new google.maps.LatLng(<%=park.latitude%>,<%=park.longitude%>);

              map = new google.maps.Map(document.getElementById('map<%=i%>'),{
              center: {lat: <%=park.latitude%>, lng: <%=park.longitude%>},
              zoom: 10,
              disableDefaultUI: true,
            });
              marker = new google.maps.Marker({
              position: latlng,
              map: map
            });
              <%end%>
            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap">
        </script>
            <div class="bg-white text-truncate", style="width: 250px; height: 50px; border-bottom-left-radius: 50%; border-bottom-right-radius: 50%; display: block; margin: auto;"><%= park.name %></div>
        <% end %>
      <% end %>
    </div>
    <div class="row">
      <div class="col-12 mt-3"><%= paginate @results, theme: 'bootstrap-5' %></div>
    </div>
  </div>