<div class='container'><br>
  <h2 class="text-center"><%= image_tag "tree.png" %><strong>検索結果一覧</strong><%= image_tag "tree.png" %></h2>
  <div class="row">
    <%= search_form_for @q, url: search_parks_path, class: "mt-3 mx-auto" do |f| %>
      <%= f.collection_select :address_cont, JpPrefecture::Prefecture.all, :name, :name, { prompt: '都道府県を選択' } %> ×
      <%= f.search_field :name_or_address_cont, placeholder: "住所またはキーワードを入力", size: "50×5" %> ×
      <%= f.collection_select :genre_id_eq, Genre.all, :id, :name, { prompt: 'ジャンルを検索' } %>
      <%= f.submit '検索' %>
    <% end %>
  </div>
  <div class="row mx-auto">
    <% @results.each_with_index do |park,i| %>
      <%= link_to park_path(park.id), class: "col-3 text-center text-dark text-nowrap mt-5" do %>
        <div id="map<%=i%>" date-lat="<%= park.latitude %>" date-lng="<%= park.longitude %>" style='border-top-left-radius: 10%; border-top-right-radius: 10%; width: 250px; height: 250px;'></div>
        <script>
          function initMap(){
            <% @results.each_with_index do |park,i| %>
              //Idの数だけマップを出力
            var latlng = new google.maps.LatLng(<%=park.latitude%>,<%=park.longitude%>);
            map = new google.maps.Map(document.getElementById('map<%=i%>'),{
            center: {lat: <%=park.latitude%>, lng: <%=park.longitude%>},
            zoom: 10,
            disableDefaultUI: true,
            });
            marker = new google.maps.Marker({
            position: latlng,
            map: map
          });
            <% end %>
          }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap">
        </script>
        <div class="bg-white", style="height: 50px; border-bottom-left-radius: 50%; border-bottom-right-radius: 50%;"><%= park.name %></div>
      <% end %>
    <% end %>
  </div>
  <div class="row">
    <div class="col-12 mt-3"><%= paginate @results, theme: 'bootstrap-5' %></div>
  </div>
</div>